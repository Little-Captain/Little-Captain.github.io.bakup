<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Little Captain's Blog - PyQt5 tutorial(Date and time)</title>
    <meta name="description" content="">
    <meta name="author" content="Little Captain">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="http://littlecaptain.net/theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="http://littlecaptain.net/theme/bootstrap.min.css" rel="stylesheet">
    <link href="http://littlecaptain.net/theme/bootstrap.min.responsive.css" rel="stylesheet">
    <link href="http://littlecaptain.net/theme/local.css" rel="stylesheet">
    <link href="http://littlecaptain.net/theme/pygments.css" rel="stylesheet">

    <!-- So Firefox can bookmark->"abo this site" -->

</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
    <div class="container">

         <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
         </a>

        <a class="brand" href="http://littlecaptain.net">Little Captain's Blog</a>

        <div class="nav-collapse">
        <ul class="nav">
            
        </ul>
        </div>
        
    </div>
    </div>
</div>

<div class="container">
    <div class="content">
    <div class="row">

        <div class="span9">
    <div class='article'>
        <div class="content-title">
            <h1>PyQt5 tutorial(Date and time)</h1>
Thu 12 October 2017

by <a class="url fn" href="http://littlecaptain.net/author/little-captain.html">Little Captain</a>
 


        </div>
	
        <div><h1>QDate, QTime, QDateTime</h1>
<ul>
<li>PyQt5 has <code>QDate</code>, <code>QDateTime</code>, <code>QTime</code> classes to work with date and time.</li>
<li>The <code>QDate</code> is a class for working with a calendar date in the Gregorian calendar. It has methods for determining the date, comparing, or manipulating dates.</li>
<li>The <code>QTime</code> class works with a clock time. It provides methods for comparing time, determining the time and various other time manipulating methods.</li>
<li>The <code>QDateTime</code> is a class that combines both QDate and QTime objects into one object.</li>
</ul>
<h1>Current date and time</h1>
<ul>
<li>PyQt5 has <code>currentDate()</code>, <code>currentTime()</code> and <code>currentDateTime()</code> methods for determining current date and time.</li>
</ul>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QDate</span><span class="p">,</span> <span class="n">QTime</span><span class="p">,</span> <span class="n">QDateTime</span><span class="p">,</span> <span class="n">Qt</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">QDate</span><span class="o">.</span><span class="n">currentDate</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ISODate</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DefaultLocaleLongDate</span><span class="p">))</span>

<span class="n">datetime</span> <span class="o">=</span> <span class="n">QDateTime</span><span class="o">.</span><span class="n">currentDateTime</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">toString</span><span class="p">())</span>

<span class="n">time</span> <span class="o">=</span> <span class="n">QTime</span><span class="o">.</span><span class="n">currentTime</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DefaultLocaleLongDate</span><span class="p">))</span>
</pre></div>


<h1>UTC time</h1>
<blockquote>
<p>The UTC (Universal Coordinated time) was chosen to be the primary time standard. UTC is used in aviation, weather forecasts, flight plans, air traffic control clearances, and maps. Unlike local time, UTC does not change with a change of seasons.</p>
</blockquote>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QDateTime</span><span class="p">,</span> <span class="n">Qt</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">QDateTime</span><span class="o">.</span><span class="n">currentDateTime</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Local datetime: &quot;</span><span class="p">,</span> <span class="n">now</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ISODate</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Universal datetime: &quot;</span><span class="p">,</span> <span class="n">now</span><span class="o">.</span><span class="n">toUTC</span><span class="p">()</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ISODate</span><span class="p">))</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;The offset from UTC is: {0} seconds&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">offsetFromUtc</span><span class="p">()))</span>
</pre></div>


<h1>Number of days</h1>
<ul>
<li>The number of days in a particular month is returned by the <code>daysInMonth()</code> method and the number of days in a year by the <code>daysInYear()</code> method.</li>
</ul>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QDate</span><span class="p">,</span> <span class="n">Qt</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">QDate</span><span class="o">.</span><span class="n">currentDate</span><span class="p">()</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">QDate</span><span class="p">(</span><span class="mi">1945</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Days in month: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">daysInMonth</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Days in year: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">daysInYear</span><span class="p">()))</span>
</pre></div>


<h1>Difference in days</h1>
<ul>
<li>The <code>daysTo()</code> method returns the number of days from a date to another date.</li>
</ul>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QDate</span>

<span class="n">xmas1</span> <span class="o">=</span> <span class="n">QDate</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
<span class="n">xmas2</span> <span class="o">=</span> <span class="n">QDate</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
<span class="n">nextyear</span> <span class="o">=</span> <span class="n">QDate</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">QDate</span><span class="o">.</span><span class="n">currentDate</span><span class="p">()</span>

<span class="n">dayspassed</span> <span class="o">=</span> <span class="n">xmas1</span><span class="o">.</span><span class="n">daysTo</span><span class="p">(</span><span class="n">now</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;{0} days have passed since last XMas&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dayspassed</span><span class="p">))</span>

<span class="n">nofdays</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">daysTo</span><span class="p">(</span><span class="n">xmas2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;There are {0} days until next XMas&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">nofdays</span><span class="p">))</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;There are {0} days until next year&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">daysTo</span><span class="p">(</span><span class="n">nextyear</span><span class="p">)))</span>
</pre></div>


<h1>Datetime arithmetic</h1>
<ul>
<li>We often need to add or subtract days, seconds, or years to a datetime value.</li>
</ul>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QDateTime</span><span class="p">,</span> <span class="n">Qt</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">QDateTime</span><span class="o">.</span><span class="n">currentDateTime</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Today:&quot;</span><span class="p">,</span> <span class="n">now</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ISODate</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Adding 12 days: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">addDays</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ISODate</span><span class="p">)))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Subtracting 22 days: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">addDays</span><span class="p">(</span><span class="o">-</span><span class="mi">22</span><span class="p">)</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ISODate</span><span class="p">)))</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Adding 50 seconds: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">addSecs</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ISODate</span><span class="p">)))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Adding 3 months: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">addMonths</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ISODate</span><span class="p">)))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Adding 12 years: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">addYears</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ISODate</span><span class="p">)))</span>
</pre></div>


<h1>Daylight saving time</h1>
<blockquote>
<p>Daylight saving time (DST) is the practice of advancing clocks during summer months so that evening daylight lasts longer. The time is adjusted forward one hour in the beginning of spring and adjusted backward in the autumn to standard time.</p>
</blockquote>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QDateTime</span><span class="p">,</span> <span class="n">QTimeZone</span><span class="p">,</span> <span class="n">Qt</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">QDateTime</span><span class="o">.</span><span class="n">currentDateTime</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Time zone: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">now</span><span class="o">.</span><span class="n">timeZoneAbbreviation</span><span class="p">()))</span>

<span class="k">if</span> <span class="n">now</span><span class="o">.</span><span class="n">isDaylightTime</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;The current date falls into DST time&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;The current date does not fall into DST time&quot;</span><span class="p">)</span>
</pre></div>


<h1>Unix epoch</h1>
<blockquote>
<p>The Unix epoch is the time 00:00:00 UTC on 1 January 1970 (or 1970- 01-01T00:00:00Z ISO 8601). The date and time in a computer is determined according to the number of seconds or clock ticks that have elapsed since the defined epoch for that computer or platform.
Unix time is the number of seconds elapsed since Unix epoch.</p>
</blockquote>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QDateTime</span><span class="p">,</span> <span class="n">Qt</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">QDateTime</span><span class="o">.</span><span class="n">currentDateTime</span><span class="p">()</span>

<span class="n">unix_time</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">toSecsSinceEpoch</span><span class="p">()</span> 
<span class="k">print</span><span class="p">(</span><span class="n">unix_time</span><span class="p">)</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">QDateTime</span><span class="o">.</span><span class="n">fromSecsSinceEpoch</span><span class="p">(</span><span class="n">unix_time</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ISODate</span><span class="p">))</span>
</pre></div>


<h1>Julian day</h1>
<blockquote>
<p>Julian day refers to a continuous count of days since the beginning of the Julian Period. It is used primarily by astronomers. It should not be confused with the Julian calendar. The Julian Period started in 4713 BC. The Julian day number 0 is assigned to the day starting at noon on January 1, 4713 BC.</p>
<p>The Julian Day Number (JDN) is the number of days elapsed since the beginning of this period. The Julian Date (JD) of any instant is the Julian day number for the preceding noon plus the fraction of the day since that instant. (Qt does not compute this fraction.) Apart from astronomy, Julian dates are often used by military and mainframe programs.</p>
</blockquote>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QDate</span><span class="p">,</span> <span class="n">Qt</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">QDate</span><span class="o">.</span><span class="n">currentDate</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Gregorian date for today: &quot;</span><span class="p">,</span> <span class="n">now</span><span class="o">.</span><span class="n">toString</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ISODate</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Julian day for today: &quot;</span><span class="p">,</span> <span class="n">now</span><span class="o">.</span><span class="n">toJulianDay</span><span class="p">())</span> 
</pre></div>


<h1>Historical battles</h1>
<blockquote>
<p>With Julian day it is possible to do calculations that span centuries.</p>
</blockquote>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">QDate</span><span class="p">,</span> <span class="n">Qt</span>

<span class="n">borodino_battle</span> <span class="o">=</span> <span class="n">QDate</span><span class="p">(</span><span class="mi">1812</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="n">slavkov_battle</span> <span class="o">=</span> <span class="n">QDate</span><span class="p">(</span><span class="mi">1805</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">now</span> <span class="o">=</span> <span class="n">QDate</span><span class="o">.</span><span class="n">currentDate</span><span class="p">()</span>

<span class="n">j_today</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">toJulianDay</span><span class="p">()</span>
<span class="n">j_borodino</span> <span class="o">=</span> <span class="n">borodino_battle</span><span class="o">.</span><span class="n">toJulianDay</span><span class="p">()</span>
<span class="n">j_slavkov</span> <span class="o">=</span> <span class="n">slavkov_battle</span><span class="o">.</span><span class="n">toJulianDay</span><span class="p">()</span>

<span class="n">d1</span> <span class="o">=</span> <span class="n">j_today</span> <span class="o">-</span> <span class="n">j_slavkov</span>
<span class="n">d2</span> <span class="o">=</span> <span class="n">j_today</span> <span class="o">-</span> <span class="n">j_borodino</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Days since Slavkov battle: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">d1</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Days since Borodino battle: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">d2</span><span class="p">))</span>
</pre></div></div>
	
        <hr>

    </div>
        </div>
        
        <div class="span3">

            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Site
                </li>
            
                <li><a href="http://littlecaptain.net/archives.html">Archives</a>
                <li><a href="http://littlecaptain.net/tags.html">Tags</a>




            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Categories
                </li>
                
                <li><a href="http://littlecaptain.net/category/git.html">git</a></li>
                <li><a href="http://littlecaptain.net/category/lean-python.html">Lean Python</a></li>
                <li><a href="http://littlecaptain.net/category/pyqt.html">PyQt</a></li>
                <li><a href="http://littlecaptain.net/category/shell.html">shell</a></li>
                <li><a href="http://littlecaptain.net/category/svn.html">SVN</a></li>
                <li><a href="http://littlecaptain.net/category/za-tan.html">杂谈</a></li>
                   
            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Links
                </li>
            
                <li><a href="https://github.com/Little-Captain">Github</a></li>
            </ul>
            </div>



        </div>  
    </div>     </div> 
<footer>
<br />
<p><a href="http://littlecaptain.net">Little Captain's Blog</a> &copy; Little Captain 2018</p>
</footer>

</div> <!-- /container -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://littlecaptain.net/theme/bootstrap-collapse.js"></script>
 
</body>
</html>