<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Little Captain's Blog - 网络基本概念</title>
    <meta name="description" content="">
    <meta name="author" content="Little Captain">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="http://littlecaptain.net/theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="http://littlecaptain.net/theme/bootstrap.min.css" rel="stylesheet">
    <link href="http://littlecaptain.net/theme/bootstrap.min.responsive.css" rel="stylesheet">
    <link href="http://littlecaptain.net/theme/local.css" rel="stylesheet">
    <link href="http://littlecaptain.net/theme/pygments.css" rel="stylesheet">

    <!-- So Firefox can bookmark->"abo this site" -->

</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
    <div class="container">

         <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
         </a>

        <a class="brand" href="http://littlecaptain.net">Little Captain's Blog</a>

        <div class="nav-collapse">
        <ul class="nav">
            
        </ul>
        </div>
        
    </div>
    </div>
</div>

<div class="container">
    <div class="content">
    <div class="row">

        <div class="span9">
    <div class='article'>
        <div class="content-title">
            <h1>网络基本概念</h1>
Sun 07 May 2017

by <a class="url fn" href="http://littlecaptain.net/author/little-captain.html">Little Captain</a>
 


        </div>
	
        <div><h2>物理地址</h2>
<ul>
<li>又名: MAC地址, 网卡硬件地址</li>
<li>作用: 用于局域网内的通信</li>
<li>48位</li>
</ul>
<h2>IP地址</h2>
<ul>
<li>IP 协议: Internet Protocol</li>
<li>IP 协议版本: IPv4(不定长包头、解析耗时); IPv6(定长包头)</li>
<li>32位: 8位一组共4组(X1.X2.X3.X4, 0.0.0.0-&gt;255.255.255.255)</li>
<li>分类<ul>
<li>用 IP 的第一位对网络进行分类</li>
<li>每个网段的主机数用子网掩码确定</li>
<li>每个网络的第一个地址代表网络本身</li>
<li>每个网络的最后一个地址代表网络的广播地址(广播地址是专门用于同时向网络中所有工作站进行发送的一个地址)</li>
</ul>
</li>
</ul>
<p><img alt="" src="../assets/images/网络/IP地址分类.png"/></p>
<ul>
<li>子网掩码</li>
</ul>
<p><img alt="" src="../assets/images/网络/子网掩码的使用.png"/></p>
<p><img alt="" src="../assets/images/网络/变长子网掩码及子网规划.png"/></p>
<h2>端口</h2>
<ul>
<li>属于传输层: 在传输层包头中(TCP头, UDP头)</li>
<li>
<p>端口号</p>
<ul>
<li>IP全球唯一类似于门牌号: 确定服务器位置</li>
<li>端口号类似于写信时的收件人: 确定要使用服务器上的哪个服务</li>
<li>访问端口即对应的服务</li>
</ul>
</li>
<li>
<p>端口号的分类: TCP端口号; UDP端口号</p>
</li>
<li>常见端口号<ul>
<li>FTP: 文件传输协议, 端口号: 20 21</li>
<li>SSH: 安全shell协议, 端口号: 22</li>
<li>Telnet: 远程登录协议, 端口号: 23, 一般系统都禁止开启这个服务(不安全, 明文传递)</li>
<li>DNS: 域名系统, 端口号: 53</li>
<li>http: 超文本传输协议, 端口号: 80</li>
<li>SMTP: 简单邮件传输协议, 端口号: 25</li>
<li>POP3: 邮局协议3代, 端口号: 110</li>
<li>常见端口号为TCP和UDP通用</li>
</ul>
</li>
<li>作用<ul>
<li>用于表示计算机上的服务</li>
<li>通过端口号可以确定计算机上开启了哪些服务</li>
</ul>
</li>
<li>16位<ul>
<li>TCP和UDP各有65535个</li>
<li>10000以内的是常见的端口号</li>
<li>大于10000的可以作为自己的程序的端口号</li>
</ul>
</li>
<li>查看本机开启的端口<ul>
<li>netstat -an: a: all; n: 只显示IP和端口号</li>
<li>status:LISTEN(被监听), ESTABLISHED(建立连接), TIME_WAIT(等待), UDP下没有, 因为UDP不需要建立连接, 所以没有状态</li>
</ul>
</li>
</ul>
<h2>Socket</h2>
<ul>
<li>IP:端口号</li>
</ul>
<h2>DNS</h2>
<ul>
<li>Domain Name System</li>
<li>DNS服务的作用: 域名 =&gt; IP</li>
<li>hosts文件<ul>
<li>作用: 做静态IP和域名对应</li>
<li>其优先级高于DNS解析</li>
<li>Mac上的位置: /private/etc/hosts</li>
</ul>
</li>
<li>从 Hosts 文件到 DNS<ul>
<li>早期Hosts文件解析域名(名称解析效能下降, 主机维护困难)</li>
<li>DNS服务(层次性, 分布式)</li>
</ul>
</li>
<li>工作过程<ul>
<li>大致流程(客户机向DNS服务器发送域名查询请求-&gt;DNS服务器告知客户机Web服务器的IP地址-&gt;客户机与Web服务器通信)</li>
<li>DNS查询过程</li>
</ul>
</li>
</ul>
<p><img alt="" src="../assets/images/网络/DNS查询过程.png"/></p>
<div class="highlight"><pre><span></span>* 从查询方式上分
    * 递归查询(要么做出查询成功的响应, 要么做出查询失败的响应; 一般客户机和服务器之间属递归查询, 当客户机向DNS服务器发出请求后, 若DNS服务器本身不能解析, 则会向另外的DNS服务器发出查询请求, 得到结果后转交给客户机)
    * 迭代查询(服务器收到一次迭代查询回复一次结果, 这个结果不一定是目标IP与域名的映射关系, 也可以是其他DNS服务器的地址)
* 从查询内容上分
    * 正向查询由域名查找IP地址
    * 反向查询由IP地址查找域名
</pre></div>
<ul>
<li>域名空间结构<ul>
<li>根域名(<code>.</code>根域名的服务器全球只有13台)</li>
<li>顶级域名: 组织域、国家或地区域; 由域名分配组织ISO决定</li>
<li>二级域名</li>
<li>三级域名: 申请完二级域名后自己规定的</li>
<li>三级域名+二级域名+顶级域名组成完整域名空间, 域名必须全球唯一</li>
<li>使用这种结构的原因<ul>
<li>互联网中的域名是有结构有规划的</li>
<li>域名进行了分级</li>
<li>在进行域名和IP地址解析时才能更容易找到</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><em>组织域</em></p>
<p><img alt="" src="../assets/images/网络/组织域名.png"/></p>
<p><em>国家或地区域</em></p>
<p><img alt="" src="../assets/images/网络/国家或地区命名.png"/></p>
<h2>数据封装与解封</h2>
<p><img alt="" src="../assets/images/网络/数据封装与解封.png"/></p>
<h2>交换机</h2>
<ul>
<li>同一网络通信</li>
<li>局域网通信</li>
<li>认识MAC地址, 不认识IP地址</li>
<li>工作在数据链路层</li>
<li>知道当前连接到这个交换机(局域网)的所有电脑的网卡硬件地址(MAC地址, 物理地址)</li>
</ul>
<h2>路由器</h2>
<ul>
<li>路由器认识 IP 地址, 用于跨网络通信</li>
</ul>
<h2>网关</h2>
<h3 id="zuo-yong">作用</h3>
<ol>
<li>网关(Gateway)又称网间连接器、协议转换器</li>
<li>网关在网络层以上实现网络互连, 是最复杂的网络互连设备, 仅用于两个高层协议不同的网络互连</li>
<li>网关既可以用于广域网互连, 也可以用于局域网互连</li>
<li>网关是一种充当转换重任的服务器或路由器, 内网IP=&gt;公网IP</li>
</ol>
<h3 id="tong-su-ding-yi">通俗定义</h3>
<ul>
<li>具有路由功能的这么一个设备</li>
<li>一般是一台路由器, 也可以在服务器上搭建路由的功能, 进而充当网关的作用</li>
<li>网关是有多级的</li>
</ul>
<h3 id="wang-guan-dao-di-zuo-liao-shi-yao">网关到底做了什么?</h3>
<ul>
<li>网关在所有内网计算机访问的不是本网段(本局域网)的数据报时使用</li>
<li>网关负责将内网IP转换为公网IP, 公网IP转换为内网IP</li>
<li>总结<ul>
<li>本局域网发送数据报, 不使用网关. 只要不是本局域网发送数据包, 全都要交给网关处理. </li>
<li>网关怎么处理: 1. 内网IP转换为公网IP 2. 通过公网IP就可以访问公网了</li>
</ul>
</li>
</ul>
<h3 id="shi-li">实例</h3>
<ul>
<li>示意图</li>
</ul>
<p><img alt="" src="../assets/images/网络/网关示意图.png"/></p>
<ul>
<li>你&lt;==&gt;PLMM<ul>
<li>同一局域网, 通过交换机记录的MAC地址进行通信</li>
<li>不需要通过网关处理</li>
</ul>
</li>
<li>你&lt;==&gt;MM2<ul>
<li>不同网络</li>
<li>需要通过网关处理</li>
</ul>
</li>
</ul></div>
	
        <hr>

    </div>
        </div>
        
        <div class="span3">

            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Site
                </li>
            
                <li><a href="http://littlecaptain.net/archives.html">Archives</a>
                <li><a href="http://littlecaptain.net/tags.html">Tags</a>




            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Categories
                </li>
                
                <li><a href="http://littlecaptain.net/category/c.html">C++</a></li>
                <li><a href="http://littlecaptain.net/category/git.html">git</a></li>
                <li><a href="http://littlecaptain.net/category/ios.html">iOS</a></li>
                <li><a href="http://littlecaptain.net/category/java.html">Java</a></li>
                <li><a href="http://littlecaptain.net/category/ji-suan-ji-wang-luo.html">计算机网络</a></li>
                <li><a href="http://littlecaptain.net/category/linux.html">Linux</a></li>
                <li><a href="http://littlecaptain.net/category/php.html">PHP</a></li>
                <li><a href="http://littlecaptain.net/category/pyqt.html">PyQt</a></li>
                <li><a href="http://littlecaptain.net/category/python.html">Python</a></li>
                <li><a href="http://littlecaptain.net/category/shell.html">shell</a></li>
                <li><a href="http://littlecaptain.net/category/svn.html">SVN</a></li>
                <li><a href="http://littlecaptain.net/category/tools.html">Tools</a></li>
                <li><a href="http://littlecaptain.net/category/xcode.html">Xcode</a></li>
                <li><a href="http://littlecaptain.net/category/za-tan.html">杂谈</a></li>
                <li><a href="http://littlecaptain.net/category/zheng-ze-biao-da-shi.html">正则表达式</a></li>
                   
            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Links
                </li>
            
                <li><a href="https://github.com/Little-Captain">Github</a></li>
            </ul>
            </div>



        </div>  
    </div>     </div> 
<footer>
<br />
<p><a href="http://littlecaptain.net">Little Captain's Blog</a> &copy; Little Captain 2018</p>
</footer>

</div> <!-- /container -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://littlecaptain.net/theme/bootstrap-collapse.js"></script>
 
</body>
</html>